<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<!--NewPage-->
<html>
<head>
<!-- Generated by javadoc on Mon Mar 17 12:02:09 PST 1997 -->
<title>
  クラス java.text.RuleBasedCollator
</title>
</head>
<body>
<a name="_top_"></a>
<pre>
<a href="packages.html">全パッケージ</a>  <a href="tree.html">クラス階層</a>  <a href="Package-java.text.html">このパッケージ</a>  <a href="java.text.ParsePosition.html#_top_">前項目</a>  <a href="java.text.SimpleDateFormat.html#_top_">次項目</a>  <a href="AllNames.html">インデックス</a></pre>
<hr>
<h1>
  クラス java.text.RuleBasedCollator
</h1>
<pre>
<a href="java.lang.Object.html#_top_">java.lang.Object</a>
   |
   +----<a href="java.text.Collator.html#_top_">java.text.Collator</a>
           |
           +----java.text.RuleBasedCollator
</pre>
<hr>
<dl>
  <dt> public class <b>RuleBasedCollator</b>
  <dt> extends <a href="java.text.Collator.html#_top_">Collator</a>
</dl><code>RuleBasedCollator</code>クラスは<code>Collator</code>の concreteサブクラスで、簡単な操作で、データ起動のテーブルコレータを使用可能にします。このクラスを使うと、カストマイズしたテーブルベースの <code>Collator</code>を作成することができます。<code>RuleBasedCollator</code>は、文字をソートキーにマップします。
 <p>効率のために、<code>RuleBasedCollator</code>には次の制約があります（さらに複雑な言語には他のサブクラスを使用することができます）。
 <ol>
 <li>フランス語の第2順序は、Collatorオブジェクト全部に適用されます。
 <li>記述のないすべてのUnicode文字は、照合順序の最後にきます。
 </ol>
 <p>照合テーブルは照合ルールのリストから成り、それぞのルールは次の3つの形式をとります。
 <pre>
    < 修飾子 >
    < 関係 > < テキスト引数 >
    < リセット > < テキスト引数>
 </pre>照合ルールの作成方法を次に示します。
 <UL Type=disc>
    <LI><strong>テキスト引数</strong>: テキスト引数は、特殊文字(すなわち、一般的な空白文字[0009-000D, 0020]およびルール構文文字[0021-002F, 003A-0040, 005B-0060, 007B-007E])を除く、あらゆる順序の文字です。これらの文字が必要な場合、単一引用符で囲むことができます(例えば、アンパサンド => '&')。
    <LI><strong>修飾子</strong>: すべてのアクセント（第2相違）が逆方向であることを指定する修飾子が1つあります。
        <p>'@' : アクセントがフランス語のように逆方向にソートされることを示します。
    <LI><strong>関係</strong>: 関係には次のものがあります。
        <UL Type=square>
            <LI>'<' : より大きい、文字相違の場合 (第1)
            <LI>';' : より大きい、アクセント相違の場合 (第2)
            <LI>',' : より大きい、ケース相違 (第3)
            <LI>'=' : 等しい
        </UL>
    <LI><strong>リセット</strong>: 主に短縮と拡張のために使用しますが、ルールセットの終わりに修正を追加するためにも、使用できるリセットが1つあります。
        <p>'&' : 次のルールが、リセットテキスト引数がソートされる位置に続くことを示す。
 </UL>
 <p>これは実際よりも複雑に聞こえます。たとえば、次の例は、同じことを同等の方法で表したものです。
 <blockquote>
 <pre>
 a < b < c
 a < b & b < c
 a < c & a < b
 </pre>
 </blockquote>テキスト引数のすぐ後に次の項目が来るので、順序が重要です。次の2つは同じではありません。
 <blockquote>
 <pre>
 a < b & a < c
 a < c & a < b
 </pre>
 </blockquote>
シーケンスには、テキスト引数がすでに存在するか、そのテキスト引数の最初の副文字列が存在しなければなりません。（たとえば、"a < b & ae < e" は有効です。シーケンスにおいて"a"は、"ae"がリセットされるより前にあるからです。）この後のケースで、"ae"は1文字として入力されませんし、そのようには扱われません。"e"は、2文字（"a"に続く"e"）に拡張されたかのようにソートされます。この違いは、自然言語に見られます。従来のスペイン語の"ch"は、単一文字に短縮されたかのように処理されます ("c < ch < d"と表現される)。一方、従来のドイツ語の"a" (aウムラウト)は、2つの文字に拡張されたかのように処理されます（"a,A < b,B ... & ae,a & AE,A"と表現される）。
 <p>
 <strong>無視可能な文字</strong>
 <p>無視可能な文字の場合、最初のルールは、関係で始まらなければなりません（上の例は実際には一部を表しています。つまり、"a < b"は実際には "< a < b"であるべきものです）。しかし、最初の関係が"<"でなければ、最初の"<"までのすべてのテキスト引数は無視できます。たとえば、", - < a < b"では "-" が無視できる文字です。これは、前に"black-birds"というワードで見たとおりです。他の言語の例を見れば、ほとんどのアクセントが無視できることがわかります。
 <p><strong>正規化とアクセント</strong>
 <p><code>Collator</code>オブジェクトは、可能な限り、テキストを内部的に正規化して、ベースの文字からアクセントを切り離します。これは、ルールを処理するときと、2つの文字列を比較するときに行われます。さらに、<code>Collator</code>は、Unicode正規ッピングを使って、結合された複数のシーケンスが正しくソートされるようにします。（詳しくは、<A HREF="http://www.aw.com/devpress">The Unicode Standard, Version 2.0</A>を参照してください。）</P>
 <p><strong>エラー</strong>
 <p>次の場合は、正しくありません。
 <UL Type=disc>
     <LI>テキスト引数の前にリセット文字も関係文字もない (例 "a < b c < d")。
     <LI>関係文字やリセット文字の後にテキスト引数がない (例 "a < , b")。
     <LI>テキスト引数（またはテキスト引数の最初の副文字列）がシーケンスにまだないのにリセットがある (例 "a < b & e < f")。
 </UL>これらのエラーのうちどれかがあると、<code>RuleBasedCollator</code>が <code>ParseException</code>をスローします。
 <p><strong>例</strong>
 <p>簡単な例:   "< a < b < c < d"
  <p>ノルウェー語:  "< a,A< b,B< c,C< d,D< e,E< f,F< g,G< h,H< i,I< j,J
                 < k,K< l,L< m,M< n,N< o,O< p,P< q,Q< r,R< s,S< t,T
                 < u,U< v,V< w,W< x,X< y,Y< z,Z
                 < \u00E5=a\u030A,\u00C5=A\u030A
                 ;aa,AA< \u00E6,\u00C6< \u00F8,\u00D8"
 <p>
 通常、ルールベースのCollatorオブジェクトを作成するには、<code>Collator</code>のファクトリメソッド <code>getInstance</code>を使用します。しかし、ニーズに合わせた特殊なルールをもつルールベースのCollatorオブジェクトを作成するには、<code>String</code>オブジェクトにルールを指定して、<code>RuleBasedCollator</code>を構築します。たとえば、次のようにします。
 <blockquote>
 <pre>
 String Simple = "< a < b < c < d";
 RuleBasedCollator mySimple = new RuleBasedCollator(Simple);
 </pre>
 </blockquote>
 または:
 <blockquote>
  <pre>
 String Norwegian = "< a,A< b,B< c,C< d,D< e,E< f,F< g,G< h,H< i,I< j,J" +
                 "< k,K< l,L< m,M< n,N< o,O< p,P< q,Q< r,R< s,S< t,T" +
                 "< u,U< v,V< w,W< x,X< y,Y< z,Z" +
                 "< \u00E5=a\u030A,\u00C5=A\u030A" +
                 ";aa,AA< \u00E6,\u00C6< \u00F8,\u00D8";
 RuleBasedCollator myNorwegian = new RuleBasedCollator(Norwegian);
 </pre>
 </blockquote>
 <p><code>Collator</code>を結合するのは、文字列を結合するとの同じくらい簡単です。次の例は、2つの異なるロケールの2つの <code>Collator</code>を結合する例です。
 <blockquote>
 <pre>
 // Create an en_US Collator object
 RuleBasedCollator en_USCollator = (RuleBasedCollator)
     Collator.getInstance(new Locale("en", "US", ""));
 // Create a da_DK Collator object
 RuleBasedCollator da_DKCollator = (RuleBasedCollator)
     Collator.getInstance(new Locale("da", "DK", ""));
 // Combine the two
 // First, get the collation rules from en_USCollator
 String en_USRules = en_USCollator.getRules();
 // Second, get the collation rules from da_DKCollator
 String da_DKRules = da_DKCollator.getRules();
 RuleBasedCollator newCollator =
     new RuleBasedCollator(en_USRules + da_DKRules);
 // newCollator has the combined rules
 </pre>
 </blockquote>
 <p>もう一つ面白い例は、既存のテーブルを変更して新しい <code>Collator</code>オブジェクトを作成する場合です。たとえば、"& C < ch, cH, Ch, CH"を <code>en_USCollator</code>オブジェクトに追加して、独自のテーブルを作成します。
 <blockquote>
  <pre>
 // Create a new Collator object with additional rules
 String addRules = "& C < ch, cH, Ch, CH";
 RuleBasedCollator myCollator =
     new RuleBasedCollator(en_USCollator + addRules);
 // myCollator contains the new rules
 </pre>
 </blockquote>
 <p>次の例は、ノンスペーシングアクセントの順序を変更する方法を示しています。
 <blockquote>
  <pre>
 // old rule
 String oldRules = "=\u0301;\u0300;\u0302;\u0308"    // main accents
                 + ";\u0327;\u0303;\u0304;\u0305"    // main accents
                 + ";\u0306;\u0307;\u0309;\u030A"    // main accents
                 + ";\u030B;\u030C;\u030D;\u030E"    // main accents
                 + ";\u030F;\u0310;\u0311;\u0312"    // main accents
                 + "< a , A ; ae, AE ; \u00e6 , \u00c6"
                 + "< b , B < c, C < e, E & C < d, D";
 // change the order of accent characters
 String addOn = "& \u0300 ; \u0308 ; \u0302";
 RuleBasedCollator myCollator = new RuleBasedCollator(oldRules + addOn);
 </pre>
 </blockquote>
 <p>最後の例では、新しい主要順序をデフォルトの設定より前に置く方法を示します。たとえば、日本語 <code>Collator</code>では、英語の文字を日本語の文字より前にソートすることも、後にソートすることもできます。
 <blockquote>
 <pre>
 // get en_US Collator rules
 RuleBasedCollator en_USCollator = (RuleBasedCollator)Collator.getInstance(Locale.US);
 // add a few Japanese character to sort before English characters
 // suppose the last character before the first base letter 'a' in
 // the English collation rule is ?
 String jaString = "& \u2212 < \u3041, \u3042 < \u3043, \u3044";
 RuleBasedCollator myJapaneseCollator = new
     RuleBasedCollator(en_USCollator.getRules() + jaString);
 </pre>
 </blockquote>
<p>
<dl>
    <dt> <b>参照:</b>
    <dd> <a href="java.text.Collator.html#_top_">Collator</a>, <a href="java.text.CollationElementIterator.html#_top_">CollationElementIterator</a>
</dl>
<hr>
<a name="index"></a>
<h2>
  <img src="images/constructor-index.gif" width=275 height=38 alt="Constructor Index">
</h2>
<dl>
  <dt> <img src="images/yellow-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#RuleBasedCollator(java.lang.String)"><b>RuleBasedCollator</b></a>(String)
  <dd>  RuleBasedCollator構築子です。
</dl>
<h2>
  <img src="images/method-index.gif" width=207 height=38 alt="Method Index">
</h2>
<dl>
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#clone()"><b>clone</b></a>()
  <dd>  標準オーバーライドです。セマンティックスは変わりません。
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#compare(java.lang.String, java.lang.String)"><b>compare</b></a>(String, String)
  <dd>  2つの異なる文字列に格納された文字データを照合ルールに従って比較します。
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#equals(java.lang.Object)"><b>equals</b></a>(Object)
  <dd>  2つの照合オブジェクトが等しいかどうかを比較します。
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#getCollationElementIterator(java.lang.String)"><b>getCollationElementIterator</b></a>(String)
  <dd>  与えられたStringのCollationElementIteratorを返します。
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#getCollationKey(java.lang.String)"><b>getCollationKey</b></a>(String)
  <dd>  文字列を、CollationKey.compareToで比較できる一連の文字に変換します。
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#getRules()"><b>getRules</b></a>()
  <dd>  照合オブジェクトに対するテーブルベースルールを入手します。
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#hashCode()"><b>hashCode</b></a>()
  <dd>  テーブルベースの照合オブジェクトのハッシュコードを生成します。

</dl>
<a name="constructors"></a>
<h2>
  <img src="images/constructors.gif" width=231 height=38 alt="Constructors">
</h2>
<a name="RuleBasedCollator"></a>
<a name="RuleBasedCollator(java.lang.String)"><img src="images/yellow-ball.gif" width=12 height=12 alt=" o "></a>
<b>RuleBasedCollator</b>
<pre>
  public RuleBasedCollator(<a href="java.lang.String.html#_top_">String</a> rules) throws <a href="java.text.ParseException.html#_top_">ParseException</a>
</pre>
<dl>
  <dd> RuleBasedCollator構築子です。テーブルルールから照合テーブルを構築します。照合ルール構文の詳細については、RuleBasedCollatorクラスの説明を参照してください。
<p>
  <dd><dl>
    <dt> <b>パラメータ:</b>
    <dd> rules - 照合テーブルを構築する元になる照合ルール
    <dt> <b>例外:</b> <a href="java.text.ParseException.html#_top_">ParseException</a>
    <dd> ルールの構築プロセスが失敗すると、フォーマット例外がスローされます。たとえば、構築ルール"a < b c < d"の場合、構築子によってParseExceptionがスローされます。
    <dt> <b>参照:</b>
    <dd> <a href="java.util.Locale.html#_top_">Locale</a>
  </dl></dd>
</dl>
<a name="methods"></a>
<h2>
  <img src="images/methods.gif" width=151 height=38 alt="Methods">
</h2>
<a name="getRules()"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="getRules"><b>getRules</b></a>
<pre>
  public <a href="java.lang.String.html#_top_">String</a> getRules()
</pre>
<dl>
  <dd> 照合オブジェクトに対するテーブルベースルールを入手します。
<p>
  <dd><dl>
    <dt> <b>返り値:</b>
    <dd> テーブル照合オブジェクトが作成される元になった照合ルールを返します。
  </dl></dd>
</dl>
<a name="getCollationElementIterator(java.lang.String)"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="getCollationElementIterator"><b>getCollationElementIterator</b></a>
<pre>
  public <a href="java.text.CollationElementIterator.html#_top_">CollationElementIterator</a> getCollationElementIterator(<a href="java.lang.String.html#_top_">String</a> source)
</pre>
<dl>
  <dd> 与えられたStringのCollationElementIteratorを返します。
<p>
  <dd><dl>
    <dt> <b>参照:</b>
    <dd> <a href="java.text.CollationElementIterator.html#_top_">CollationElementIterator</a>
  </dl></dd>
</dl>
<a name="compare(java.lang.String, java.lang.String)"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="compare"><b>compare</b></a>
<pre>
  public int compare(<a href="java.lang.String.html#_top_">String</a> source,
                     <a href="java.lang.String.html#_top_">String</a> target)
</pre>
<dl>
  <dd> 2つの異なる文字列に格納された文字データを、照合ルールに従って比較します。ある言語において、ある文字列が、別の文字列より大きいか、小さいか、それとも等しいかを返します。これは、サブクラスでオーバーライドすることができます。
<p>
  <dd><dl>
    <dt> <b>オーバーライド:</b>
    <dd> クラス <a href="java.text.Collator.html#_top_">Collator</a>の <a href="java.text.Collator.html#compare(java.lang.String, java.lang.String)">compare</a> 
  </dl></dd>
</dl>
<a name="getCollationKey(java.lang.String)"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="getCollationKey"><b>getCollationKey</b></a>
<pre>
  public <a href="java.text.CollationKey.html#_top_">CollationKey</a> getCollationKey(<a href="java.lang.String.html#_top_">String</a> source)
</pre>
<dl>
  <dd> 文字列を、CollationKey.compareToで比較できる一連の文字に変換します。これは、java.text.Collator.getCollationKeyをオーバーライドします。また、サブクラスでオーバーラードすることができます。
<p>
  <dd><dl>
    <dt> <b>オーバーライド:</b>
    <dd> クラス <a href="java.text.Collator.html#_top_">Collator</a>の <a href="java.text.Collator.html#getCollationKey(java.lang.String)">getCollationKey</a> 
  </dl></dd>
</dl>
<a name="clone()"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="clone"><b>clone</b></a>
<pre>
  public <a href="java.lang.Object.html#_top_">Object</a> clone()
</pre>
<dl>
  <dd> 標準オーバーライドです。セマンティックスは変わりません。
<p>
  <dd><dl>
    <dt> <b>オーバーライド:</b>
    <dd> クラス <a href="java.text.Collator.html#_top_">Collator</a>の <a href="java.text.Collator.html#clone()">clone</a> 
  </dl></dd>
</dl>
<a name="equals(java.lang.Object)"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="equals"><b>equals</b></a>
<pre>
  public boolean equals(<a href="java.lang.Object.html#_top_">Object</a> obj)
</pre>
<dl>
  <dd> 2つの照合オブジェクトが等しいかどうかを比較します。
<p>
  <dd><dl>
    <dt> <b>パラメータ:</b>
    <dd> obj - これと比較するテーブルベースの照合オブジェクト
        <dt> <b>返り値:</b>
    <dd> 現在のテーブルベースの照合オブジェクトが、テーブルベースの照合オブジェクトobjと等しければ真を、等しくなければ偽を返します。
    <dt> <b>オーバーライド:</b>
    <dd> クラス <a href="java.text.Collator.html#_top_">Collator</a>の <a href="java.text.Collator.html#equals(java.lang.Object)">equals</a> 
  </dl></dd>
</dl>
<a name="hashCode()"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="hashCode"><b>hashCode</b></a>
<pre>
  public int hashCode()
</pre>
<dl>
  <dd> テーブルベース照合オブジェクトのハッシュコードを生成します。
<p>
  <dd><dl>
    <dt> <b>オーバーライド:</b>
    <dd> クラス <a href="java.text.Collator.html#_top_">Collator</a>の <a href="java.text.Collator.html#hashCode()">hashCode</a> 
  </dl></dd>
</dl>
<hr>
<pre>
<a href="packages.html">全パッケージ</a>  <a href="tree.html">クラス階層</a>  <a href="Package-java.text.html">このパッケージ</a>  <a href="java.text.ParsePosition.html#_top_">前項目</a>  <a href="java.text.SimpleDateFormat.html#_top_">次項目</a>  <a href="AllNames.html">インデックス</a></pre>
</body>
</html>

