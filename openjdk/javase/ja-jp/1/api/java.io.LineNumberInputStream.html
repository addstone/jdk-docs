<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<!--NewPage-->
<html>
<head>
<!-- Generated by javadoc on Mon Mar 17 12:02:09 PST 1997 -->
<title>
  クラス java.io.LineNumberInputStream
</title>
</head>
<body>
<a name="_top_"></a>
<pre>
<a href="packages.html">全パッケージ</a>  <a href="tree.html">クラス階層</a>  <a href="Package-java.io.html">このパッケージ</a>  <a href="java.io.InputStreamReader.html#_top_">前項目</a>  <a href="java.io.LineNumberReader.html#_top_">次項目</a>  <a href="AllNames.html">インデックス</a></pre>
<hr>
<h1>
  クラス java.io.LineNumberInputStream
</h1>
<pre>
<a href="java.lang.Object.html#_top_">java.lang.Object</a>
   |
   +----<a href="java.io.InputStream.html#_top_">java.io.InputStream</a>
           |
           +----<a href="java.io.FilterInputStream.html#_top_">java.io.FilterInputStream</a>
                   |
                   +----java.io.LineNumberInputStream
</pre>
<hr>
<dl>
  <dt> public class <b>LineNumberInputStream</b>
  <dt> extends <a href="java.io.FilterInputStream.html#_top_">FilterInputStream</a>
</dl>
<b> 注意: LineNumberInputStream の使用は推奨されません。</b>
<i>このクラスはバイトがそのまま正しく文字を表現するという仮定の上で作られています。JDK&nbsp;1.1 で推奨される文字ストリームへのオペレーションは、行番号をカウントするクラスを含んだ新しい文字ストリームクラスを使うことです。</i>
<p>
このクラスは入力ストリームフィルタであり、現在の行番号を監視して保持する機能が追加されています。
 <p>
 行とはバイトの連なりであり、その最後に復帰文字（<code>'&#92;r'</code>）か、改行文字（<code>'&#92;n'</code>）か、または復帰文字の直後に改行文字が現れます。これら3種類のケースにおいて、行を終了させる文字は一個の改行文字として返されます。
 <p>
 行番号は <code>0</code> から始まり、<code>read</code> が改行文字を返すたびに <code>1</code> ずつ増えて行きます。
<p>
<dl>
    <dt> <b>参照:</b>
    <dd> <a href="java.io.LineNumberReader.html#_top_">LineNumberReader</a>
</dl>
<hr>
<a name="index"></a>
<h2>
  <img src="images/constructor-index.gif" width=275 height=38 alt="Constructor Index">
</h2>
<dl>
  <dt> <img src="images/yellow-ball-small.gif" width=6 height=6 alt=" o ">
	<a 
href="#LineNumberInputStream(java.io.InputStream)"><b>LineNumberInputStream</b></a>(InputStream
)
  <dd>  指定された入力ストリームから読み込む新しい行番号付き入力ストリームを作成する。
</dl>
<h2>
  <img src="images/method-index.gif" width=207 height=38 alt="Method Index">
</h2>
<dl>
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#available()"><b>available</b></a>()
  <dd>  ブロッキングを発生させることなく入力ストリームから読み込むことのできるバイト数を返す。
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#getLineNumber()"><b>getLineNumber</b></a>()
  <dd>  現在の行番号を返す。
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#mark(int)"><b>mark</b></a>(int)
  <dd>  入力ストリームの現在位置にマークを付ける。
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#read()"><b>read</b></a>()
  <dd>  入力ストリームから次のバイトを読み込む。
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#read(byte[], int, int)"><b>read</b></a>(byte[], int, int)
  <dd>  入力ストリームからバイト配列へ最大 <code>b.length</code> バイトのデータを読み込む。
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#reset()"><b>reset</b></a>()
  <dd>  入力ストリーム上で最後に <code>mark</code> メソッドが呼び出された時点のマーク位置へストリームを再設定する。
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#setLineNumber(int)"><b>setLineNumber</b></a>(int)
  <dd>  指定された引数に行番号をセットする。
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#skip(long)"><b>skip</b></a>(long)
  <dd>  入力ストリームからのデータを <code>n</code> バイトだけスキップしてその範囲のデータを捨てる。
</dl>
<a name="constructors"></a>
<h2>
  <img src="images/constructors.gif" width=231 height=38 alt="Constructors">
</h2>
<a name="LineNumberInputStream"></a>
<a name="LineNumberInputStream(java.io.InputStream)"><img src="images/yellow-ball.gif" width=12 
height=12 alt=" o "></a>
<b>LineNumberInputStream</b>
<pre>
  public LineNumberInputStream(<a href="java.io.InputStream.html#_top_">InputStream</a> in)
</pre>
<dl>
  <dd> 指定された入力ストリームから読み込む新しい行番号付き入力ストリームを作成します。
<p>
  <dd><dl>
    <dt> <b>パラメータ:</b>
    <dd> in - 下層の入力ストリーム。
  </dl></dd>
</dl>
<a name="methods"></a>
<h2>
  <img src="images/methods.gif" width=151 height=38 alt="Methods">
</h2>
<a name="read()"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="read"><b>read</b></a>
<pre>
 public int read() throws <a href="java.io.IOException.html#_top_">IOException</a>
</pre>
<dl>
  <dd> 入力ストリームから次のバイトデータを読み込みます。バイトの値は <code>0</code> から <code>255</code> の値をとる <code>int</code> として返されます。ストリームの終端に達して読み込むデータが存在しない場合は <code>-1</code> を返します。このメソッドはデータが読み込み可能になるか、ストリームの終端が検出されるか、または例外がスローされるまでブロックします。
 <p>
 
 <code>LineNumberInputStream</code> の <code>read</code> メソッドはその下層入力ストリームの <code>read</code> メソッドを呼び出します。入力に現れる復帰文字と改行文字をチェックして適切な行番号を保ちます。復帰文字と復帰＋改行文字は1個の改行文字へ付け替えられます。
<p>
  <dd><dl>
    <dt> <b>返り値:</b>
    <dd> 次のバイトデータ。ストリームの終端に達した場合は <code>-1</code>。
    <dt> <b>例外:</b> <a href="java.io.IOException.html#_top_">IOException</a>
    <dd> I/O エラーが発生した場合。
    <dt> <b>オーバーライド:</b>
    <dd> <a 
href="java.io.FilterInputStream.html#_top_">FilterInputStream</a>クラスの <a href="java.io.FilterInputStream.html#read()">read</a> 
    <dt> <b>参照:</b>
    <dd> <a href="java.io.FilterInputStream.html#in">in</a>, <a 
href="#getLineNumber()">getLineNumber</a>
  </dl></dd>
</dl>
<a name="read(byte[], int, int)"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="read"><b>read</b></a>
<pre>
 public int read(byte b[],
                 int off,
                 int len) throws <a href="java.io.IOException.html#_top_">IOException</a>
</pre>
<dl>
  <dd> 入力ストリームからバイト配列へ最大 <code>len</code> バイトのデータを読み込みます。このメソッドは入力が可能になるまでブロックします。
 <p>
  <code>LineNumberInputStream</code> の <code>read</code> メソッドは引数を取らない read メソッドを繰り返し呼び出して配列に書き込みます
<p>
  <dd><dl>
    <dt> <b>パラメータ:</b>
    <dd> b - データが読み込まれるバッファ。
    <dd> off - データの開始位置を示すオフセット。
    <dd> len - 読み込むバイトの最大数。
    <dt> <b>返り値:</b>
    <dd> バッファに読み込まれた全バイト数。ストリームの終端に達して読み込むデータが存在しなかった場合は <code>-1</code> 。
    <dt> <b>例外:</b> <a href="java.io.IOException.html#_top_">IOException</a>
    <dd> I/O エラーが発生した場合。
    <dt> <b>オーバーライド:</b>
    <dd> <a 
href="java.io.FilterInputStream.html#_top_">FilterInputStream</a> クラスの <a href="java.io.FilterInputStream.html#read(byte[], int, int)">read</a> 
    <dt> <b>参照:</b>
    <dd> <a href="#read()">read</a>
  </dl></dd>
</dl>
<a name="setLineNumber(int)"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="setLineNumber"><b>setLineNumber</b></a>
<pre>
  public void setLineNumber(int lineNumber)
</pre>
<dl>
  <dd> 指定された引数に行番号をセットします。
<p>
  <dd><dl>
    <dt> <b>パラメータ:</b>
    <dd> lineNumber - 新しい行番号。
  </dl></dd>
</dl>
<a name="getLineNumber()"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="getLineNumber"><b>getLineNumber</b></a>
<pre>
  public int getLineNumber()
</pre>
<dl>
  <dd> 現在の行番号を返します。
<p>
  <dd><dl>
    <dt> <b>返り値:</b>
    <dd> 行番号の現在値。
  </dl></dd>
</dl>
<a name="skip(long)"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="skip"><b>skip</b></a>
<pre>
 public long skip(long n) throws <a href="java.io.IOException.html#_top_">IOException</a>
</pre>
<dl>
  <dd> 入力ストリームからのデータを <code>n</code> バイトだけスキップしてその範囲のデータを捨てます。種々の理由により <code>skip</code> メソッドは指定されたよりも小さな（<code>0</code> の場合もあり）バイト数しかスキップしないことがあります。実際にスキップしたバイト数が返されます。
 <p>
 <code>LineNumberInputStream</code> の <code>skip</code> メソッドは長さ <code>n</code> のバイト配列を作成して、そこに <code>n</code> バイトのデータを書き終えるか、またはストリームの終端に達するまで読み込みを続けます。
<p>
  <dd><dl>
    <dt> <b>パラメータ:</b>
    <dd> n - スキップするバイト数。
    <dt> <b>返り値:</b>
    <dd> 実際にスキップされたバイト数。
    <dt> <b>例外:</b> <a href="java.io.IOException.html#_top_">IOException</a>
    <dd> I/O エラーが発生した場合。
    <dt> <b>オーバーライド:</b>
    <dd> <a 
href="java.io.FilterInputStream.html#_top_">FilterInputStream</a> クラスの <a href="java.io.FilterInputStream.html#skip(long)">skip</a> 
  </dl></dd>
</dl>
<a name="available()"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="available"><b>available</b></a>
<pre>
 public int available() throws <a href="java.io.IOException.html#_top_">IOException</a>
</pre>
<dl>
  <dd> ブロッキングを発生することなしにこの入力から読み込むことのできるバイト数を返します。
 <p>
 下層の入力ストリームからブロッキングの発生なしに <i>k</i> 個の文字を入力可能だったとすると、<code>LineNumberInputStream</code>がブロッキングなしに読み込み可能な文字数は <i>k</i>/2 となることに注意してください。これは、下層入力ストリームからの <i>k</i>個の文字は <i>k</i>/2 対の <code>'&#92;r'</code> と <code>'&#92;n'</code> である可能性があり、これが <i>k</i>/2 個の <code>'&#92;n'</code> 文字に変換されるかも知れないからです。
<p>
  <dd><dl>
    <dt> <b>返り値:</b>
    <dd> ブロッキングを発生することなしに入力から読み込むことのできるバイト数。
    <dt> <b>例外:</b> <a href="java.io.IOException.html#_top_">IOException</a>
    <dd> I/O エラーが発生した場合。
    <dt> <b>オーバーライド:</b>
    <dd> <a 
href="java.io.FilterInputStream.html#_top_">FilterInputStream</a> クラスの <a href="java.io.FilterInputStream.html#available()">available</a> 
    <dt> <b>参照:</b>
    <dd> <a href="java.io.FilterInputStream.html#in">in</a>
  </dl></dd>
</dl>
<a name="mark(int)"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="mark"><b>mark</b></a>
<pre>
  public void mark(int readlimit)
</pre>
<dl>
  <dd> 入力ストリームの現在位置にマークを付けます。これに続いて <code>reset</code>メソッドを呼び出すと最後にマークを付けられた位置にストリームを再設定しますから、次回の読み込み操作は同じバイトから読み込むことになります。 <p>

 <code>LineNumberInputStream</code> の <code>mark</code> メソッドは private 変数に現在の行番号を記録してから、下層入力ストリームの <code>mark</code> メソッドを呼び出します。
<p>
  <dd><dl>
    <dt> <b>パラメータ:</b>
    <dd> readlimit - マーク位置が無効になる前に読み込み可能な最大バイト数。
    <dt> <b>オーバーライド:</b>
    <dd> <a 
href="java.io.FilterInputStream.html#_top_">FilterInputStream</a> クラスの <a href="java.io.FilterInputStream.html#mark(int)">mark</a> 
    <dt> <b>参照:</b>
    <dd> <a href="java.io.FilterInputStream.html#in">in</a>, <a href="#reset()">reset</a>
  </dl></dd>
</dl>
<a name="reset()"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="reset"><b>reset</b></a>
<pre>
 public void reset() throws <a href="java.io.IOException.html#_top_">IOException</a>
</pre>
<dl>
  <dd> 入力ストリームへ最後に <code>mark</code> メソッドが呼び出されたときのマーク位置へこのストリームの位置を再設定します。
 <p>
 <code>LineNumberInputStream</code> の <code>reset</code> メソッドはまず行番号を <code>mark</code> メソッドが呼び出された時点の値にリセットし、それから下層入力ストリームの <code>reset</code> メソッドを呼び出します。
 <p>
   ストリームのマークは、ストリームに何が含まれているかをチェックするために少しデータを先読みするために使われます。これを最も容易に実行する方法は一般的なパーザを動かすことです。
 ストリームがパーザで取り扱えるタイプならば、これですべてうまく行きます。
 ストリームがこのようなタイプではない場合は、パーザが失敗した場所で例外を発生します。もし readlimit バイトの範囲内でこれが発生した場合は、例外を検知した外部コードがストリームをリセットして、別なパーザで再トライすることができます。
<p>
  <dd><dl>
    <dt> <b>例外:</b> <a href="java.io.IOException.html#_top_">IOException</a>
    <dd> I/O エラーが発生した場合。
    <dt> <b>オーバーライド:</b>
    <dd> <a 
href="java.io.FilterInputStream.html#_top_">FilterInputStream</a> クラスの <a href="java.io.FilterInputStream.html#reset()">reset</a> 
    <dt> <b>参照:</b>
    <dd> <a href="java.io.FilterInputStream.html#in">in</a>, <a href="#mark(int)">mark</a>
  </dl></dd>
</dl>
<hr>
<pre>
<a href="packages.html">全パッケージ</a>  <a href="tree.html">クラス階層</a>  <a href="Package-java.io.html">このパッケージ</a>  <a href="java.io.InputStreamReader.html#_top_">前項目</a>  <a href="java.io.LineNumberReader.html#_top_">次項目</a>  <a href="AllNames.html">インデックス</a></pre>
</body>
</html>
